apiVersion: v1
kind: ConfigMap
metadata:
  name: my-decrypt-config
  annotations:
    config.k8s.io/function: |
      container:
        image: gcr.io/kpt-fn-contrib/sops:unstable
    config.kubernetes.io/local-config: 'true'
data:
  cmd: decrypt
  cmd-json-path-filter: '$[?(@.metadata.name=="toDecrypt")]'
  cmd-extra-params-json-path-filter: '$[?(@.metadata.name=="keys")]'
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-encrypt-config
  annotations:
    config.k8s.io/function: |
      container:
        image: gcr.io/kpt-fn-contrib/sops:unstable
    config.kubernetes.io/local-config: 'true'
data:
  cmd: encrypt
  cmd-json-path-filter: '$[?(@.metadata.name=="toEncrypt")]'
  cmd-extra-params-json-path-filter: '$[?(@.metadata.name=="keys")]'
  unencrypted-regex: ^(kind|apiVersion|group|metadata)$
